name: Build and upload wheels for QE

on:
  push:
    branches-ignore:
      - dev*
      - stage*
      - master*
  workflow_dispatch:
    inputs:
      disable-optimizations:
        description: 'Build unoptimized wheels?'
        default: false
        type: boolean
        required: true

jobs:
  build-artifacts:
    uses: ./.github/workflows/build-wheels.yml
    with:
      apply-no-optimizations: ${{ inputs.disable-optimizations }}

  upload-to-jfrog:
    needs: build-artifacts
    uses: ./.github/workflows/upload-to-jfrog.yml
    with:
      jfrog-repo-name: ${{ vars.JFROG_GENERIC_REPO_NAME }}
    secrets: inherit
